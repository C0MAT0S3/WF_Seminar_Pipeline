// Import configs
includeConfig 'conf/base.config'
includeConfig 'conf/publish.config'

// Used for pipeline naming
manifest {
    name = 'rna-bfjt'
    mainScript = 'rna-bfjt.nf'
}

// Set default registry for Docker and Singularity independent of -profile
docker.registry      = 'quay.io'
singularity.registry = 'quay.io'

// Set default profies for Docker and Singularity
profiles {
    docker {
        docker.enabled          = true
        singularity.enabled     = false
        docker.runOptions       = '-u $(id -u):$(id -g)'
    }
    singularity {
        singularity.enabled     = true
        singularity.autoMounts  = true
        docker.enabled          = false
    }
}

params {
    // Input options
    input                      = null

    // References
    genome                     = null
    splicesites                = null
    gtf_extra_attributes       = 'gene_name'
    gtf_group_features         = 'gene_id'
    skip_gtf_filter            = false
    skip_gtf_transcript_filter = false
    featurecounts_feature_type = 'exon'
    featurecounts_group_type   = 'gene_biotype'
    gencode                    = false
    save_reference             = false
    igenomes_base              = 's3://ngi-igenomes/igenomes/'
    igenomes_ignore            = false

    // QC
    skip_qc                    = false
    skip_bigwig                = false
    skip_stringtie             = false
    skip_fastqc                = false
    skip_preseq                = true
    skip_dupradar              = false
    skip_qualimap              = false

    // UMI handling
    with_umi                   = false
    skip_umi_extract           = false
    umitools_extract_method    = 'string'
    umitools_grouping_method   = 'directional'
    umitools_dedup_stats       = false
    umitools_bc_pattern        = null
    umitools_bc_pattern2       = null
    umitools_umi_separator     = null
    umi_discard_read           = null
    save_umi_intermeds         = false

    // Trimming
    trimmer                    = 'trimgalore'
    min_trimmed_reads          = 1000
    extra_trimgalore_args      = null
    extra_fastp_args           = null
    save_trimmed               = false
    skip_trimming              = false

    // Alignment
    aligner                    = 'hisat2'
    seq_center                 = null
    hisat2_build_memory        = '12GB'
    save_merged_fastq          = false
    save_unaligned             = false
    save_align_intermeds       = false
    skip_markduplicates        = false
    skip_alignment             = false
    skip_pseudo_alignment      = false
    stranded_threshold         = 0.8
    unstranded_threshold       = 0.1

    // MultiQC options
    multiqc_config             = null
    multiqc_title              = null
    multiqc_logo               = null
    max_multiqc_email_size     = '25.MB'
    multiqc_methods_description = null
}

plugins {
  id 'nf-validation'
}

includeConfig 'conf/igenomes.config'